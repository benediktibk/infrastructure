version: "3.6"
services:
    database-server:
        env_file:
            - build/sql.env
        image: "benediktschmidt.at/database-server"
        volumes:
            - sqldata:/var/opt/mssql/data
        networks:
            - internal
        ports:
            - "1433:1433"
    homepage:
        image: "benediktschmidt.at/me"
        networks:
            - internal
        ports:
            - "80:80"
    valheim:
        env_file:
            - build/valheim.env
        image: "benediktschmidt.at/valheim"
        networks:
            - internal
    corona:
        environment:
            - DBHOST=database-server
        env_file:
            - build/corona.env
        image: "benediktschmidt.at/corona"
        networks:
            - internal
        ports:
            - "8080:80"
volumes:
    sqldata:
        external: true
networks:
    internal:
    dmz:
